(function () {
    // Get the necessary elements
    const doc = document,
        html = doc.documentElement,
        body = doc.body,
        lightsToggle = doc.getElementById("lights-toggle"),
        scrollReveal = window.sr = ScrollReveal();

    // Function to handle theme toggling
    function handleThemeToggle() {
        const labelTextElement = lightsToggle.parentNode.querySelector(".label-text");
        if (lightsToggle.checked) {
            body.classList.remove("lights-off");
            if (labelTextElement) {
                labelTextElement.innerHTML = "dark";
            }
        } else {
            body.classList.add("lights-off");
            if (labelTextElement) {
                labelTextElement.innerHTML = "light";
            }
        }
    }

    // Add JS class to HTML element
    html.classList.remove("no-js");
    html.classList.add("js");

    // Add 'is-loaded' class to body element on window load
    window.addEventListener("load", function () {
        body.classList.add("is-loaded");
    });

    // Add animations if 'has-animations' class is present in body
    if (body.classList.contains("has-animations")) {
        window.addEventListener("load", function () {
            scrollReveal.reveal(".feature", {
                duration: 600,
                distance: "20px",
                easing: "cubic-bezier(0.215, 0.61, 0.355, 1)",
                origin: "right",
                viewFactor: .2
            });
        });
    }

    // Add event listeners for theme toggle
    if (lightsToggle) {
        window.addEventListener("load", handleThemeToggle);
        lightsToggle.addEventListener("change", handleThemeToggle);
    }
})();